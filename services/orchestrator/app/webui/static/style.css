:root { font-family: ui-sans-serif, system-ui, -apple-system, "Segoe UI", Roboto, sans-serif; }
* { box-sizing: border-box; }
html, body { height:100%; width:100%; }
body { margin:0; background:#0b0e14; color:#e6e6e6; overflow:hidden; }
a { color:#8bd3ff; text-decoration:none; }
a:hover { text-decoration:underline; }

/* Scrollbars (dark, subtle, modern) */
:root {
  --sb-track: rgba(15, 23, 42, 0.65);
  --sb-thumb: rgba(148, 163, 184, 0.35);
  --sb-thumb-hover: rgba(148, 163, 184, 0.55);
  --owb-sidebar-w: 280px;
  --owb-splitter-w: 6px;
  --owb-wb-left-w: 520px;
}
* { scrollbar-width: thin; scrollbar-color: var(--sb-thumb) var(--sb-track); }
*::-webkit-scrollbar { width: 10px; height: 10px; }
*::-webkit-scrollbar-track { background: var(--sb-track); border-radius: 999px; }
*::-webkit-scrollbar-thumb { background: var(--sb-thumb); border-radius: 999px; border: 2px solid var(--sb-track); }
*::-webkit-scrollbar-thumb:hover { background: var(--sb-thumb-hover); }

/* App layout (MiniMax-like) */
.layout { display:grid; grid-template-columns: var(--owb-sidebar-w) var(--owb-splitter-w) minmax(0, 1fr); position:fixed; inset:0; overflow:hidden; }
.sidebar { width:auto; background:#0f172a; border-right:0; display:flex; flex-direction:column; min-height:0; }
.splitter {
  background: rgba(148, 163, 184, 0.06);
  position: relative;
  user-select: none;
  -webkit-user-select: none;
  touch-action: none;
}
.splitter.splitter-vertical { cursor: col-resize; }
.splitter.splitter-vertical::after {
  content: "";
  position: absolute;
  left: 50%;
  top: 0;
  bottom: 0;
  width: 2px;
  transform: translateX(-50%);
  background: rgba(148, 163, 184, 0.22);
}
.splitter.splitter-vertical:hover { background: rgba(148, 163, 184, 0.10); }
.splitter.splitter-vertical:hover::after { background: rgba(148, 163, 184, 0.34); }
.splitter.dragging { background: rgba(148, 163, 184, 0.14); }
.splitter.dragging::after { background: rgba(148, 163, 184, 0.52); }
.side-top { padding:14px; display:flex; flex-direction:column; gap:10px; }
.side-brand { display:flex; align-items:center; justify-content:space-between; gap:10px; }
.side-brand-actions { display:flex; align-items:center; gap:8px; }
.brand-link { display:flex; align-items:center; gap:10px; color:inherit; text-decoration:none; min-width:0; }
.brand-link:hover { text-decoration:none; }
.brand-icon { width:24px; height:24px; border-radius:8px; border:1px solid #334155; background:#0b0e14; image-rendering: pixelated; }
.side-brand .logo { font-weight:800; letter-spacing:0.2px; white-space:nowrap; overflow:hidden; text-overflow:ellipsis; }
.icon-btn { border:1px solid #334155; background:#0b1020; color:#e6e6e6; border-radius:10px; padding:6px 8px; cursor:pointer; }
.icon-btn:hover { background:#111827; }
.side-actions { display:flex; gap:10px; }
.btn-icon { flex:0 0 auto; }
.btn-text { white-space:nowrap; overflow:hidden; text-overflow:ellipsis; }
.primary-btn { flex:1; display:flex; align-items:center; gap:8px; justify-content:center; border:1px solid #334155; background:#111827; color:#e6e6e6; border-radius:12px; padding:10px 12px; cursor:pointer; font-weight:600; }
.primary-btn:hover { background:#0b1020; }
.search { display:flex; gap:8px; }
.search input { flex:1; }
.side-list { padding:0 6px 10px 6px; overflow:auto; flex:1; min-height:0; }
.side-section-title { color:#9aa3af; font-size:0.85rem; padding:10px 8px 6px 8px; }
.task-item { display:flex; align-items:flex-start; justify-content:space-between; gap:10px; padding:10px 10px; margin:6px 6px; border-radius:12px; border:1px solid transparent; }
.task-item:hover { background:#0b1020; border-color:#1f2937; }
.task-item.active { background:#0b1020; border-color:#334155; }
.task-link { flex:1 1 auto; min-width:0; display:block; color:inherit; text-decoration:none; }
.task-link:hover { text-decoration:none; }
.task-item-row { display:flex; align-items:center; gap:10px; margin-bottom:0; min-width:0; }
.task-item .title { font-weight:650; color:#e6e6e6; white-space:nowrap; overflow:hidden; text-overflow:ellipsis; min-width:0; flex:1 1 auto; }
.task-item-row .status { flex:0 0 auto; }
.task-del { flex:0 0 auto; align-self:flex-start; margin-top:2px; padding:4px 6px; border-radius:10px; border:1px solid #334155; background:#0b1020; color:#9aa3af; cursor:pointer; opacity:0.65; }
.task-item:hover .task-del { opacity:1; }
.task-del:hover { background:#111827; color:#e6e6e6; }
.task-item .meta { color:#9aa3af; font-size:0.82rem; display:flex; gap:8px; align-items:center; }
.side-bottom { padding:12px 14px; border-top:1px solid #1f2937; display:flex; gap:10px; align-items:center; justify-content:flex-end; }

.main { min-width:0; display:flex; flex-direction:column; overflow:hidden; min-height:0; }
.topbar { display:flex; justify-content:flex-end; align-items:center; padding:14px 18px; border-bottom:1px solid #1f2937; background:rgba(11,14,20,0.75); backdrop-filter: blur(10px); position:sticky; top:0; z-index:5; }
.container { padding:14px; max-width:none; margin:0; width:100%; overflow:auto; flex:1; min-height:0; }
.card { background:#0f172a; border:1px solid #1f2937; border-radius:14px; padding:14px; margin-bottom:14px; }

/* Settings (tabbed) */
.settings-layout { display:grid; grid-template-columns: 240px minmax(0, 1fr); gap:14px; align-items:start; }
.settings-nav {
  background:#0f172a;
  border:1px solid #1f2937;
  border-radius:14px;
  padding:12px;
  position:sticky;
  top:14px;
  height: fit-content;
  display:flex;
  flex-direction:column;
  gap:8px;
}
.settings-nav-title { font-weight:900; letter-spacing:0.2px; margin:2px 0 6px 0; }
.settings-tab {
  width:100%;
  text-align:left;
  padding:10px 10px;
  border-radius:12px;
  border:1px solid transparent;
  background:transparent;
  color:#e6e6e6;
  cursor:pointer;
  font-weight:650;
}
.settings-tab:hover { background:#0b1020; border-color:#1f2937; }
.settings-tab.active { background:#0b1020; border-color:#334155; }
.settings-panel-title { font-size:1.1rem; font-weight:900; letter-spacing:0.2px; margin:4px 0 12px 0; }
@media (max-width: 980px) {
  .settings-layout { grid-template-columns: 1fr; }
  .settings-nav { position:relative; top:auto; }
  .settings-tab { display:inline-flex; width:auto; }
  .settings-nav { flex-direction:row; flex-wrap:wrap; align-items:center; }
  .settings-nav-title { flex-basis:100%; }
}

.table { width:100%; border-collapse:collapse; }
.table th, .table td { border-bottom:1px solid #1f2937; padding:8px; vertical-align:top; }
.table th { color:#aab6c4; font-weight:600; text-align:left; }
.goal { max-width:520px; white-space:nowrap; overflow:hidden; text-overflow:ellipsis; }
.pre { background:#0b1020; border:1px solid #1f2937; border-radius:8px; padding:10px; overflow:auto; white-space:pre-wrap; position:relative; }
.error { color:#ffb4b4; }
.muted { color:#9aa3af; }
.hint { color:#9aa3af; font-size:0.9rem; }

/* Prevent long tokens (paths/ids/urls) from overflowing containers */
.pre,
.chat-bubble,
.timeline-item .desc,
.timeline-item .kind,
.table td,
.table th {
  overflow-wrap: anywhere;
}
code {
  overflow-wrap: anywhere;
  word-break: break-all;
}
#wb-report-path code {
  display: block;
  margin-top: 6px;
}
.timeline-item > div:first-child { min-width:0; }
.status { padding:2px 8px; border-radius:999px; border:1px solid #334155; font-size:0.85rem; }
.status.running { background:#1f2937; }
.status.succeeded { background:#064e3b; border-color:#065f46; }
.status.failed { background:#7f1d1d; border-color:#991b1b; }
.status.waiting_approval { background:#3f2f00; border-color:#6b4f00; }
.status.canceled { background:#1f2937; border-color:#64748b; color:#cbd5e1; }
/* Footer is hidden in the new desktop-first UI. */
.footer { display:none; }

/* Left sidebar collapse */
body.sidebar-collapsed .layout { grid-template-columns: 56px var(--owb-splitter-w) minmax(0, 1fr); }
body.sidebar-collapsed .brand-link .logo { display:none; }
body.sidebar-collapsed .side-actions .btn-text { display:none; }
body.sidebar-collapsed .side-actions .primary-btn { justify-content:center; padding:10px 10px; }
body.sidebar-collapsed .search { display:none; }
body.sidebar-collapsed .side-list { display:none; }
body.sidebar-collapsed .side-top { padding:12px 10px; gap:10px; }
body.sidebar-collapsed .side-brand { flex-direction:column; align-items:center; }
body.sidebar-collapsed .side-brand-actions { width:100%; justify-content:flex-start; flex-direction:column; gap:8px; align-items:center; }
body.sidebar-collapsed .brand-link { justify-content:center; width:100%; }
body.sidebar-collapsed .side-actions { flex-direction:column; }
body.sidebar-collapsed .icon-btn { width:34px; height:34px; padding:0; display:inline-flex; align-items:center; justify-content:center; }
body.sidebar-collapsed .task-item-row { margin-bottom:0; }
body.sidebar-collapsed .task-item-row .status { display:none; }
label { display:block; margin-bottom:10px; }
input, textarea, select { width:100%; padding:8px; border-radius:8px; border:1px solid #334155; background:#0b1020; color:#e6e6e6; }
.field-help { margin-top:6px; color:#9aa3af; font-size:0.85rem; line-height:1.35; }
button { padding:8px 12px; border-radius:8px; border:1px solid #334155; background:#111827; color:#e6e6e6; cursor:pointer; }
button:hover { background:#0b1020; }
.danger-btn { border-color:#991b1b; background:#1f0b10; color:#ffb4b4; }
.danger-btn:hover { background:#2a0f15; }

/* One-click copy buttons */
.copy-btn {
  border:1px solid #334155;
  background:rgba(11,16,32,0.85);
  color:#9aa3af;
  border-radius:10px;
  padding:5px 7px;
  cursor:pointer;
  font-size:12px;
  line-height:1;
  display:inline-flex;
  align-items:center;
  justify-content:center;
  user-select:none;
}
.copy-btn:hover { background:#111827; color:#e6e6e6; }

/* Lightweight modal + toast (avoid native alert/confirm in embedded WebViews) */
.owb-modal-backdrop {
  position: fixed;
  inset: 0;
  z-index: 1100;
  background: rgba(2, 6, 23, 0.68);
  display: flex;
  align-items: center;
  justify-content: center;
  padding: 20px;
}
.owb-modal {
  width: min(480px, 92vw);
  background: #0f172a;
  border: 1px solid #334155;
  border-radius: 14px;
  box-shadow: 0 18px 45px rgba(0, 0, 0, 0.45);
  padding: 14px;
}
.owb-modal-title { font-weight: 850; letter-spacing: 0.2px; }
.owb-modal-body { margin-top: 8px; color: #cbd5e1; line-height: 1.45; overflow-wrap: anywhere; }
.owb-modal-actions { margin-top: 12px; display: flex; justify-content: flex-end; gap: 10px; }
.owb-toast {
  position: fixed;
  left: 50%;
  bottom: 16px;
  transform: translateX(-50%);
  z-index: 1200;
  max-width: 86vw;
  background: rgba(17, 24, 39, 0.95);
  border: 1px solid #334155;
  border-radius: 12px;
  padding: 10px 12px;
  color: #e6e6e6;
  overflow-wrap: anywhere;
  backdrop-filter: blur(10px);
}
.owb-toast.ok { border-color: #065f46; }
.owb-toast.fail { border-color: #991b1b; }
.copy-btn:active { transform: translateY(1px); }
.copy-btn:disabled { opacity:0.5; cursor:not-allowed; }
.copy-btn.copied { border-color:#10b981; color:#10b981; }
.copy-btn.copy-inline { padding:4px 6px; border-radius:10px; }
.copy-btn.copy-corner {
  position:absolute;
  top:8px;
  right:8px;
  opacity:0;
}
.copyable:hover > .copy-btn.copy-corner { opacity:1; }
.copy-field { position:relative; display:block; }
.copy-field > input, .copy-field > textarea, .copy-field > select { padding-right:42px; }
.grid { display:grid; grid-template-columns: 1fr 1fr 1fr; gap:10px; }
.tool-list code { background:#0b1020; padding:1px 6px; border-radius:6px; border:1px solid #1f2937; }

/* Home compose */
.hero { padding:40px 0 10px 0; text-align:center; }
.hero h1 { font-size:40px; margin:0 0 14px 0; letter-spacing:0.2px; }
.compose { background:#0f172a; border:1px solid #1f2937; border-radius:18px; padding:14px; max-width:820px; margin:0 auto; }
.compose textarea { border-radius:14px; border-color:#1f2937; background:#0b0e14; min-height:140px; resize:vertical; }
.compose-row { display:flex; align-items:center; justify-content:space-between; margin-top:10px; gap:10px; }
.compose-home { margin-top:22px; }
.compose-actions { display:flex; align-items:center; gap:10px; }
.compose-hint { margin-top:10px; line-height:1.35; }
.pill { display:inline-flex; align-items:center; gap:8px; padding:6px 10px; border-radius:999px; border:1px solid #334155; background:#0b1020; color:#aab6c4; font-size:0.86rem; }
.run-btn { padding:10px 14px; border-radius:14px; background:#111827; border:1px solid #334155; font-weight:700; }
.run-btn:hover { background:#0b1020; }
.chips { display:flex; flex-wrap:wrap; gap:10px; justify-content:center; margin:16px auto 0 auto; max-width:900px; }
.chip { display:inline-flex; align-items:center; gap:8px; padding:8px 12px; border-radius:999px; border:1px solid #334155; background:#0f172a; cursor:pointer; color:#e6e6e6; }
.chip:hover { background:#0b1020; }

/* Timeline */
.timeline { display:flex; flex-direction:column; gap:8px; max-height:280px; overflow:auto; padding-right:4px; }
.timeline.timeline-lg { max-height:520px; }
.timeline-item { display:flex; justify-content:space-between; gap:12px; align-items:flex-start; background:#0b1020; border:1px solid #1f2937; border-radius:12px; padding:10px 12px; }
.timeline-item .kind { font-weight:650; }
.timeline-item .desc { color:#aab6c4; font-size:0.92rem; margin-top:4px; white-space:pre-wrap; }
.timeline-item .ts { color:#9aa3af; font-size:0.82rem; white-space:nowrap; }
.timeline-right { display:flex; flex-direction:column; align-items:flex-end; gap:6px; flex:0 0 auto; }
.timeline-item .copy-btn { opacity:0; }
.timeline-item:hover .copy-btn { opacity:1; }

/* Chat */
.chat { display:flex; flex-direction:column; gap:10px; max-height:280px; overflow:auto; padding:10px; background:#0b1020; border:1px solid #1f2937; border-radius:12px; }
.chat-empty { color:#9aa3af; font-size:0.9rem; }
.chat-item { display:flex; }
.chat-item.user { justify-content:flex-end; }
.chat-item.assistant { justify-content:flex-start; }
.chat-item.system { justify-content:center; }
.chat-bubble { max-width:86%; padding:10px 12px; border-radius:14px; border:1px solid #1f2937; background:#0f172a; white-space:pre-wrap; position:relative; }
.chat-item.user .chat-bubble { background:#111827; border-color:#334155; }
.chat-item.system .chat-bubble { background:#0b0e14; border-color:#334155; color:#aab6c4; }
.chat-text.chat-markdown { white-space: normal; }
.chat-text.chat-markdown .md-body > :first-child { margin-top: 0; }
.chat-text.chat-markdown .md-body > :last-child { margin-bottom: 0; }
.chat-text.chat-markdown pre { background:#0b1020; border:1px solid #1f2937; border-radius:10px; padding:10px; overflow:auto; }
.chat-meta { margin-top:6px; font-size:0.78rem; color:#9aa3af; }
.chat-row { display:flex; gap:10px; align-items:center; justify-content:space-between; margin-top:10px; }

/* Hoverable citations (footnote-style) */
.cite {
  position: relative;
  display: inline-flex;
  align-items: baseline;
  margin: 0 2px;
}
.cite-label {
  font-size: 0.78em;
  color: #93c5fd;
  border-bottom: 1px dotted rgba(147, 197, 253, 0.65);
}
.cite-missing .cite-label {
  color: #fca5a5;
  border-bottom-color: rgba(252, 165, 165, 0.75);
}
.cite-pop {
  position: absolute;
  left: 0;
  bottom: 1.25em;
  min-width: 220px;
  max-width: min(520px, 78vw);
  padding: 10px 12px;
  border-radius: 12px;
  border: 1px solid #1f2937;
  background: rgba(11, 16, 32, 0.98);
  color: #e6e6e6;
  font-size: 12px;
  line-height: 1.4;
  white-space: pre-wrap;
  overflow-wrap: anywhere;
  box-shadow: 0 18px 50px rgba(0,0,0,0.55);
  opacity: 0;
  transform: translateY(-6px);
  pointer-events: none;
  transition: opacity 120ms ease, transform 120ms ease;
  z-index: 40;
}
.cite:hover > .cite-pop {
  opacity: 1;
  transform: translateY(-10px);
  pointer-events: auto;
}
.cite-sources {
  margin-top: 12px;
  border-top: 1px solid #1f2937;
  padding-top: 10px;
}
.cite-sources summary {
  cursor: pointer;
  user-select: none;
  color: #aab6c4;
  font-weight: 650;
}
.cite-sources-list { margin-top: 10px; display: flex; flex-direction: column; gap: 8px; }
.cite-source-row { display: flex; gap: 8px; align-items: baseline; }
.cite-source-num { color: #93c5fd; font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace; }
.cite-source-text { color: #cbd5e1; overflow-wrap: anywhere; }

.cite-warnings {
  margin: 10px 0 0 0;
  border: 1px solid rgba(245, 158, 11, 0.4);
  background: rgba(63, 47, 0, 0.22);
  border-radius: 14px;
  padding: 8px 10px;
}
.cite-warnings summary {
  cursor: pointer;
  user-select: none;
  color: #fcd34d;
  font-weight: 700;
}
.cite-warnings-body { margin-top: 8px; display: flex; flex-direction: column; gap: 6px; color: #fde68a; font-size: 0.92rem; }
.cite-warning-item { overflow-wrap: anywhere; }

/* Task workbench (center + preview) */
.wb-grid { display:grid; grid-template-columns: minmax(0, 1fr) 420px; gap:14px; align-items:start; }
.wb-grid.right-collapsed { grid-template-columns: minmax(0, 1fr) 52px; }
.wb-center, .wb-right { min-width:0; }
.wb-right { position:relative; }
.wb-right-body { transition: opacity 160ms ease, transform 160ms ease; }
.wb-right-toggle {
  position:sticky;
  top: 12px;
  float:right;
  z-index: 5;
  width: 36px;
  height: 36px;
  border-radius: 12px;
  border: 1px solid #1f2937;
  background: #0b1020;
  color: #aab6c4;
  cursor: pointer;
}
.wb-right-toggle:hover { background:#111827; color:#e6e6e6; }
.wb-right-toggle:active { transform: translateY(1px); }
.wb-right-toggle::after { content:"⟩"; font-size: 16px; line-height: 1; }
.wb-grid.right-collapsed .wb-right-toggle::after,
.wb2-grid.right-collapsed .wb-right-toggle::after { content:"⟨"; }
.wb-grid.right-collapsed .wb-right-body { opacity:0; pointer-events:none; transform: translateX(12px); }
@media (max-width: 1120px) {
  .wb-grid { grid-template-columns: 1fr; }
  .wb-grid.right-collapsed { grid-template-columns: 1fr; }
}
.wb-title-row { display:flex; justify-content:space-between; gap:14px; align-items:flex-start; }
.wb-title { font-size:1.15rem; font-weight:850; letter-spacing:0.2px; line-height:1.35; word-break:break-word; }
.wb-sub { margin-top:8px; display:flex; flex-wrap:wrap; gap:10px; align-items:center; }
.dot { color:#334155; }
.wb-updated { white-space:nowrap; }
.wb-section-title { font-weight:750; letter-spacing:0.2px; }
.artifact-list { display:flex; flex-direction:column; gap:10px; margin-top:10px; }
.artifact-item { background:#0b1020; border:1px solid #1f2937; border-radius:12px; padding:10px 12px; }
.artifact-item .path { overflow:hidden; text-overflow:ellipsis; white-space:nowrap; }

/* Collapsible panels */
details > summary { list-style:none; }
details > summary::-webkit-details-marker { display:none; }

details.wb-collapsible > summary.wb-collapsible-summary {
  cursor:pointer;
  display:flex;
  align-items:center;
  justify-content:space-between;
  gap:10px;
}
details.wb-collapsible > summary.wb-collapsible-summary::after {
  content:"▾";
  display:inline-block;
  color:#9aa3af;
  transition: transform 120ms ease;
}
details.wb-collapsible:not([open]) > summary.wb-collapsible-summary::after {
  transform: rotate(-90deg);
}
.wb-collapsible-body { margin-top:12px; }
.wb-subsection { margin:0; padding:0; }

details.wb-subdetails {
  margin-top:12px;
  border:1px solid #1f2937;
  border-radius:14px;
  padding:12px;
  background:#0b1020;
}
details.wb-subdetails > summary { cursor:pointer; color:#aab6c4; font-weight:650; }

/* Task layout v2 (chat + large preview) */
.wb2-grid { display:grid; grid-template-columns: minmax(420px, var(--owb-wb-left-w)) var(--owb-splitter-w) minmax(0, 1fr); gap:0; align-items:stretch; height: 100%; }
/* When the preview is collapsed, the conversation area should expand to fill the space. */
.wb2-grid.right-collapsed { grid-template-columns: minmax(0, 1fr) 0 52px; }
.wb2-grid.right-collapsed .wb2-splitter { display:none; }
.wb2-left, .wb2-right { min-width:0; }
.wb2-left { display:flex; flex-direction:column; gap:12px; min-height:0; }
.wb2-taskbar {
  background:#0f172a;
  border:1px solid #1f2937;
  border-radius:14px;
  padding:12px 14px;
}
.wb2-taskbar-row { display:flex; align-items:center; gap:10px; min-width:0; }
.wb2-taskbar-row .wb2-task-title { flex:1 1 auto; min-width:0; white-space:nowrap; overflow:hidden; text-overflow:ellipsis; }
.wb2-net-status { flex:0 0 auto; font-size:0.92rem; overflow-wrap:anywhere; }
.wb2-net-status.warn { color:#fbbf24; }
.wb2-net-status.bad { color:#ffb4b4; }
.wb2-taskbar-actions { display:flex; gap:8px; align-items:center; flex:0 0 auto; }
.wb2-taskbar-spacer { flex:1 1 auto; }
.wb2-task-title { font-size:1.05rem; font-weight:850; letter-spacing:0.2px; line-height:1.35; overflow-wrap:anywhere; }
.wb2-task-meta { margin-top:10px; display:flex; align-items:center; justify-content:space-between; gap:10px; flex-wrap:wrap; }
.wb2-task-meta-left { display:flex; gap:10px; align-items:center; flex-wrap:wrap; min-width:0; }
.wb2-task-meta-right { display:flex; align-items:center; justify-content:flex-end; flex:0 0 auto; }
.wb2-error { margin-top:10px; }

.wb2-thread {
  background:#0f172a;
  border:1px solid #1f2937;
  border-radius:14px;
  padding:12px;
  flex: 1;
  overflow:auto;
  min-height:0;
  display:flex;
  flex-direction:column;
  gap:12px;
}

.wb2-thread .chat {
  max-height: none;
  overflow: visible;
  padding: 0;
  background: transparent;
  border: 0;
  border-radius: 0;
}
.wb2-thread .steps-list { max-height: none; overflow: visible; padding-right: 0; }

.wb2-steps {
  background:#0f172a;
  border:1px solid #1f2937;
  border-radius:14px;
  padding:12px;
}
.wb2-steps-title { font-weight:750; letter-spacing:0.2px; }
.wb2-steps > summary.wb2-steps-title {
  cursor:pointer;
  display:flex;
  align-items:center;
  justify-content:space-between;
  gap:10px;
}
.wb2-steps > summary.wb2-steps-title::after {
  content:"▾";
  color:#9aa3af;
  transition: transform 120ms ease;
}
.wb2-steps:not([open]) > summary.wb2-steps-title::after { transform: rotate(-90deg); }
.wb2-steps[open] .steps-list { margin-top:10px; }
.steps-list { display:flex; flex-direction:column; gap:10px; }
.steps-list { max-height: 320px; overflow:auto; padding-right: 4px; }

.step-card {
  background:#0b1020;
  border:1px solid #1f2937;
  border-radius:12px;
  overflow:hidden;
}
.step-summary {
  cursor:pointer;
  display:flex;
  align-items:flex-start;
  justify-content:space-between;
  gap:10px;
  padding:10px 12px;
}
.step-summary::after {
  content:"▾";
  color:#9aa3af;
  margin-left: 8px;
  transition: transform 120ms ease;
}
.step-card:not([open]) .step-summary::after { transform: rotate(-90deg); }
.step-title {
  font-weight:650;
  min-width:0;
  overflow:hidden;
  text-overflow:ellipsis;
  white-space:nowrap;
}
.step-meta { display:flex; gap:8px; align-items:center; flex:0 0 auto; }
.step-body {
  border-top:1px solid #1f2937;
  padding:10px 12px;
  display:flex;
  flex-direction:column;
  gap:6px;
  color:#aab6c4;
  font-size:0.92rem;
}
.step-event { overflow-wrap:anywhere; white-space:pre-wrap; }

.wb2-compose {
  background:#0f172a;
  border:1px solid #1f2937;
  border-radius:14px;
  padding:12px;
}
.wb2-compose textarea {
  width:100%;
  border:1px solid #334155;
  background:#0b1020;
  color:#e6e6e6;
  border-radius:12px;
  padding:10px 12px;
  resize: vertical;
  min-height: 62px;
}
.wb2-compose-row { display:flex; align-items:center; justify-content:space-between; gap:10px; margin-top:10px; }

.wb2-approval { margin-bottom:0; }

.wb2-right { position:relative; min-height:0; overflow:hidden; }
.wb2-right-body {
  background:#0f172a;
  border:1px solid #1f2937;
  border-radius:14px;
  padding:12px;
  min-height: 520px;
  display:flex;
  flex-direction:column;
  gap:10px;
}
.wb2-preview-top { margin-bottom:10px; }
.wb2-filebar { display:flex; gap:10px; align-items:center; justify-content:space-between; flex-wrap:wrap; }
.wb2-file-select {
  flex: 1;
  min-width: 220px;
  border:1px solid #334155;
  background:#0b1020;
  color:#e6e6e6;
  border-radius:12px;
  padding:8px 10px;
}
.wb2-file-actions { display:flex; gap:10px; align-items:center; flex-wrap:wrap; }
.wb2-file-hint { margin-top:8px; }

.wb2-viewer {
  background:#0b1020;
  border:1px solid #1f2937;
  border-radius:12px;
  overflow:hidden;
  min-height: 420px;
  flex: 1;
  min-height: 0;
}

/* Generic preview renderers */
.wb-frame { width:100%; height:100%; border:0; background:#0b1020; }
.wb-image { display:block; width:100%; height:100%; object-fit:contain; background:#0b1020; }
.wb-doc { height:100%; overflow:auto; padding:14px; }
.wb-doc pre { margin:0; }
.wb-code { margin:0; height:100%; overflow:auto; padding:12px; background:#0b1020; border-radius:10px; border:1px solid #1f2937; }
.wb-code code { font-family: ui-monospace, SFMono-Regular, Menlo, Consolas, monospace; font-size: 13px; line-height: 1.55; }

.wb-table-wrap { height:100%; overflow:auto; padding:10px; }
.wb-table { width:100%; border-collapse:collapse; }
.wb-table th, .wb-table td { border-bottom:1px solid #1f2937; padding:6px 8px; white-space:nowrap; vertical-align:top; }
.wb-table th { position:sticky; top:0; background:#0f172a; z-index:1; color:#aab6c4; font-weight:750; }

.wb-xlsx { display:flex; flex-direction:column; height:100%; }
.wb-xlsx-tabs { display:flex; gap:8px; align-items:center; padding:10px; border-bottom:1px solid #1f2937; background:#0f172a; overflow:auto; }
.wb-xlsx-tab { border:1px solid transparent; background:transparent; color:#e6e6e6; border-radius:12px; padding:6px 10px; cursor:pointer; font-weight:650; white-space:nowrap; }
.wb-xlsx-tab:hover { background:#0b1020; border-color:#1f2937; }
.wb-xlsx-tab.active { background:#0b1020; border-color:#334155; }
.wb-xlsx-body { flex:1; min-height:0; overflow:hidden; }

.wb-media { height:100%; display:flex; align-items:center; justify-content:center; padding:14px; }
.wb-audio { width: min(720px, 100%); }
.wb-video { width: min(920px, 100%); max-height: 100%; border-radius:12px; background:#000; }
.md-body { line-height:1.65; }
.md-body h1, .md-body h2, .md-body h3 { margin: 14px 0 8px 0; }
.md-body code { background: rgba(148,163,184,0.15); padding: 1px 6px; border-radius: 6px; }
.md-body pre code { display:block; padding: 12px; }

.wb-web { display:flex; flex-direction:column; height:100%; }
.wb-web-bar { display:flex; gap:10px; padding:10px; border-bottom:1px solid #1f2937; background:#0f172a; }
.wb-web-bar input {
  flex:1;
  border:1px solid #334155;
  background:#0b1020;
  color:#e6e6e6;
  border-radius:12px;
  padding:8px 10px;
}
.wb-web-bar button { border:1px solid #334155; background:#111827; color:#e6e6e6; border-radius:12px; padding:8px 12px; cursor:pointer; }
.wb-web-bar button:hover { background:#0b1020; }
.wb-web .wb-frame { flex:1; }

/* PPT editor (lightweight, tool-driven) */
.ppt-root { display:grid; grid-template-columns: 220px minmax(0, 1fr); height:100%; }
.ppt-left { border-right:1px solid #1f2937; background:#0b1020; padding:10px; overflow:auto; }
.ppt-add-slide { width:100%; border:1px solid #334155; background:#111827; color:#e6e6e6; border-radius:12px; padding:10px 12px; cursor:pointer; font-weight:650; }
.ppt-add-slide:hover { background:#0f172a; }
.ppt-slide-list { display:flex; flex-direction:column; gap:8px; margin-top:10px; }
.ppt-slide-item { text-align:left; width:100%; border:1px solid transparent; background:transparent; color:#e6e6e6; border-radius:12px; padding:8px 10px; cursor:pointer; overflow:hidden; text-overflow:ellipsis; white-space:nowrap; }
.ppt-slide-item:hover { background:#0f172a; border-color:#1f2937; }
.ppt-slide-item.active { background:#0f172a; border-color:#334155; }

.ppt-main { display:flex; flex-direction:column; min-width:0; height:100%; }
.ppt-toolbar { display:flex; gap:10px; align-items:center; padding:10px; border-bottom:1px solid #1f2937; background:#0f172a; }
.ppt-tool { border:1px solid #334155; background:#111827; color:#e6e6e6; border-radius:12px; padding:8px 10px; cursor:pointer; }
.ppt-tool:hover { background:#0b1020; }
.ppt-theme { border:1px solid #334155; background:#0b1020; color:#e6e6e6; border-radius:12px; padding:8px 10px; }

.ppt-canvas-wrap { flex:1; min-height:0; display:flex; align-items:center; justify-content:center; padding:14px; overflow:auto; background:#0b1020; }
.ppt-canvas {
  width: 100%;
  max-width: 920px;
  aspect-ratio: 16 / 9;
  background:#ffffff;
  color:#0b0e14;
  border-radius:12px;
  padding:28px 34px;
  box-shadow: 0 18px 60px rgba(0,0,0,0.55);
  overflow:hidden;
}
.ppt-title { font-size: 32px; font-weight: 850; line-height:1.2; outline:none; }
.ppt-bullets { margin: 18px 0 0 0; padding-left: 22px; font-size: 18px; }
.ppt-bullet { margin: 8px 0; outline:none; }

.ppt-notes { border-top:1px solid #1f2937; background:#0f172a; padding:10px; }
.ppt-notes-label { color:#aab6c4; font-weight:700; margin-bottom:8px; }
.ppt-notes-ta { width:100%; min-height:96px; border:1px solid #334155; background:#0b1020; color:#e6e6e6; border-radius:12px; padding:10px 12px; resize: vertical; }

/* Collapse behavior (toggle stays visible) */
.wb2-grid.right-collapsed .wb2-right-body { opacity:0; pointer-events:none; transform: translateX(12px); }
.wb2-grid.right-collapsed .wb-right-toggle { position:sticky; top:12px; }
.wb2-grid.right-collapsed .wb2-right-body { display:none; }
.wb2-right .wb-right-toggle { float:none; display:block; margin-left:auto; }

@media (max-width: 1120px) {
  .wb2-grid { grid-template-columns: 1fr; }
  .wb2-grid .wb2-splitter { display:none; }
  .wb2-grid.right-collapsed { grid-template-columns: 1fr; }
  .wb2-grid.right-collapsed .wb2-right-body { opacity: 1; pointer-events: auto; transform:none; }
}
